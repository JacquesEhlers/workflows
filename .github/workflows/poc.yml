name: Playwright POC

on:
  push:
  workflow_dispatch:

jobs:
  playwright-poc:
    runs-on: ubuntu-latest
    environment: test
    steps:
      # New step to print secrets
      - name: Print secrets
        run: |
          echo "TKORGANIZATION: ${{ secrets.TKORGANIZATION }}"
          echo "TKENVIRONMENT: ${{ secrets.TKENVIRONMENT }}"
          echo "TKTOKEN: ${{ secrets.TKTOKEN }}"
      - uses: kubeshop/setup-testkube@v1
        with:
          organization: ${{ secrets.TKORGANIZATION }}
          environment: ${{ secrets.TKENVIRONMENT }}
          token: ${{ secrets.TKTOKEN }}

      - run: |
          testkube run testworkflow playwright-poc -f
